## 1ã€<span style="color:brown">æ•°æ®åº“ï¼š</span>

**1.1ã€æ•°æ®åº“æ¦‚è¿°ï¼š**

<span style="color:green">æ•°æ®åº“æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ</span>ï¼Œæ˜¯æŒ‰ç…§*<u>æ•°æ®ç»“æ„æ¥ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„ä»“åº“</u>*ï¼Œç±»åˆ«æœ‰ï¼š

- å…³ç³»å‹æ•°æ®åº“`(Relational Database)`ï¼šMySQLã€Oracleã€SQL Server
- éå…³ç³»å‹æ•°æ®åº“`(NoSQL Database)`ï¼šMongDBã€Redis

**1.2ã€æ•°æ®åº“çš„ç‰¹ç‚¹ï¼š**

1. æŒä¹…åŒ–å­˜å‚¨æ•°æ®ï¼›
2. æ–¹ä¾¿ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†æ•°æ®ï¼›
3. ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼æ“ä½œæ•°æ®åº“ï¼šSQLï¼›

**1.3ã€MySQLå¯åŠ¨ï¼š**

1. æ‰“å¼€æœåŠ¡çª—å£æ–¹å¼ --> services.mscï¼›

2. ä½¿ç”¨ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€cmdï¼š

   - å¯åŠ¨MySQLï¼šnet  start  mysqlï¼›

   - å…³é—­MySQLï¼šnet  stop  mysqlï¼›
   - è¿æ¥æ•°æ®åº“ï¼š
     - mysql -uroot -p(å¯†æ–‡è¾“å…¥)ï¼›
     - mysql -uroot -på¯†ç ï¼›
     - mysql -hip -uroot -pè¿æ¥ç›®æ ‡çš„å¯†ç ï¼›
     - mysql --host=ip --user=root --password=è¿æ¥ç›®æ ‡çš„å¯†ç ï¼›
   - é€€å‡ºï¼šexit   æˆ–   quitï¼›



## 2ã€<span style="color:brown">SQLï¼š</span>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€[Structured  Query  Language]

**2.1ã€SQLè¯­å¥ï¼š**

1. SQLè¯­å¥å¯ä»¥å•è¡Œæˆ–è€…å¤šè¡Œä¹¦å†™ï¼Œ<span style="color:red">ä»¥åˆ†å·ç»“å°¾</span>ï¼›

2. å¯ä»¥ä½¿ç”¨ç©ºæ ¼å’Œç¼©è¿›å¢å¼ºè¯­å¥çš„å¯è¯»æ€§ï¼›

3. MYSQL æ•°æ®åº“çš„ SQL è¯­å¥ä¸åŒºåˆ†å¤§å°å†™ï¼Œ<span style="color:red">å…³é”®å­—å»ºè®®ä½¿ç”¨å¤§å†™</span>ï¼›

4. ä¸‰ç§æ³¨é‡Šï¼š

   - å•è¡Œæ³¨é‡Šï¼š

     ```scss
     --æ³¨é‡Šå†…å®¹ 
     
     #æ³¨é‡Šå†…å®¹
     ```

   - å¤šè¡Œæ³¨é‡Šï¼š
   
     ```scss
     /*æ³¨é‡Šå†…å®¹*/
     ```

**2.2ã€SQLåˆ†ç±»ï¼š**

| ç±»åˆ« |                         å«ä¹‰                          |
| :--: | :---------------------------------------------------: |
| DDL  |    <span style="color:green">æ“ä½œæ•°æ®åº“ã€è¡¨</span>    |
| DML  | <span style="color:green">å¢ã€åˆ ã€æ”¹è¡¨ä¸­çš„æ•°æ®</span> |
| DQL  | <span style="color:green">æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„æ•°æ®</span> |
| DCL  |    <span style="color:green">ç®¡ç†ç”¨æˆ·ã€æˆæƒ</span>    |

**2.3ã€SQLè¯­å¥æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ**ğŸ˜¶â€ğŸŒ«ï¸ğŸ˜¶â€ğŸŒ«ï¸ğŸ˜¶â€ğŸŒ«ï¸

1. **è§£æï¼š** 
   - æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰è§£æ SQL è¯­å¥ï¼Œæ£€æŸ¥å…¶è¯­æ³•å’Œè¯­ä¹‰çš„æ­£ç¡®æ€§ï¼›
   - è§£æå™¨å°† SQL è¯­å¥è½¬æ¢æˆå†…éƒ¨æ•°æ®ç»“æ„ï¼Œè¿™ä¸ªç»“æ„è¢«ç”¨æ¥è¡¨ç¤ºæŸ¥è¯¢çš„é€»è¾‘ç»“æ„ï¼›
2. **ç¼–è¯‘ï¼š** 
   - DBMS å°† SQL æŸ¥è¯¢è½¬åŒ–ä¸º**<u>å¯æ‰§è¡Œçš„è®¡åˆ’</u>**ï¼›
   - è®¡åˆ’æ˜¯ä¸€ä¸ªä¼˜åŒ–è¿‡çš„æ‰§è¡Œè·¯å¾„ï¼Œç”¨äºåœ¨æ•°æ®åº“ä¸­æ£€ç´¢ã€æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ•°æ®ï¼›
3. **ä¼˜åŒ–ï¼š** åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒDBMS è¿›è¡Œä¼˜åŒ–ï¼Œé€‰æ‹©æ‰§è¡Œè®¡åˆ’ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ï¼›
4. **æ‰§è¡Œè®¡åˆ’ç”Ÿæˆï¼š** 
   - æ‰§è¡Œè®¡åˆ’æè¿°äº†å¦‚ä½•åœ¨åº•å±‚å­˜å‚¨å¼•æ“ä¸Šæ‰§è¡ŒæŸ¥è¯¢ï¼›
   - æ‰§è¡Œè®¡åˆ’é€šå¸¸åŒ…æ‹¬äº†è¡¨çš„è®¿é—®è·¯å¾„ã€è¿æ¥é¡ºåºã€ç´¢å¼•çš„ä½¿ç”¨ç­‰ä¿¡æ¯ï¼›
5. **æ‰§è¡Œï¼š** å°†æ‰§è¡Œè®¡åˆ’ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ï¼Œç„¶åæ ¹æ®è®¡åˆ’åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œå®é™…çš„æ“ä½œï¼›
6. **ç»“æœè¿”å›ï¼š** æ‰§è¡Œå¼•æ“ç”Ÿæˆçš„ç»“æœä¼šè¢«è¿”å›ç»™ç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºï¼›



## 3ã€<span style="color:brown">DDLï¼š</span>æ“ä½œæ•°æ®åº“ã€è¡¨

**3.1ã€æ“ä½œæ•°æ®åº“ï¼š**CRUD

1. C-----Createï¼šåˆ›å»ºï¼›

   - åˆ›å»ºæ•°æ®åº“ï¼š

     > create database if not exists db4 character set gbk;
   
     ```sql
     //æ™®é€šåˆ›å»º
     create database æ•°æ®åº“åç§°;
     //åˆ¤æ–­å¼åˆ›å»º
     create database if not exists æ•°æ®åº“åç§°;
     //æŒ‡å®šå­—ç¬¦æ ¼å¼
     create database æ•°æ®åº“åç§° character set å­—ç¬¦é›†åç§°;
     ```

2. R-----Retrieveï¼šæŸ¥è¯¢ï¼›

   - æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“çš„åç§°ï¼š

     ```sql
     show databases;
     ```
     
   - æŸ¥è¯¢å»ºåº“è¯­å¥ï¼š

     ```sql
     show create database æ•°æ®åº“åç§°;
     ```
     
   - æŸ¥è¯¢å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“åç§°ï¼š

     ```sql
     select database();
     ```
     
   - ä½¿ç”¨æ•°æ®åº“ï¼š

     ```sql
     use æ•°æ®åº“åç§°;
     ```

3. U-----Updateï¼šä¿®æ”¹ï¼›

   - ä¿®æ”¹æ•°æ®åº“å­—ç¬¦é›†ï¼š

     > alter database db1 character set utf8;
   
     ```sql
      alter database æ•°æ®åº“åç§° character set å­—ç¬¦é›†åç§°;
     ```

4. D-----Deleteï¼šåˆ é™¤ï¼›

   - åˆ é™¤æ•°æ®åº“ï¼š

     ```sql
     //æ™®é€šåˆ é™¤
     drop database æ•°æ®åº“åç§°;
     //åˆ¤æ–­åˆ é™¤æ–¹å¼
     drop database if exists æ•°æ®åº“åç§°;
     ```

**3.2ã€æ“ä½œæ•°æ®åº“ä¸­çš„è¡¨ï¼š**CRUD

1. C-----Createï¼šåˆ›å»ºï¼›

   - åˆ›å»ºæ•°æ®åº“ä¸­çš„è¡¨ï¼š

     ```sql
     //æœ€åä¸€åˆ—ä¸éœ€è¦åŠ é€—å·
     //æ™®é€šåˆ›å»º
     create table student(
         id int,
         name varchar(20),
         age int,
         score double(4,2),
         birthday date,
         insert_time timestamp
     );
     ```

   - å¤åˆ¶è¡¨ï¼š

     ```sql
     //åˆ›å»ºä¸€ä¸ªè·Ÿç°åœ¨è¡¨æ ¼ç›¸ä¼¼çš„è¡¨
     create table è¡¨å2 like è¡¨å1;
     ```

   - SQLä¸­çš„æ•°æ®ç±»å‹ä»‹ç»ï¼š

     | æ•°æ®ç±»å‹  |    å«ä¹‰    |                           èŒƒä¾‹                            |
     | :-------: | :--------: | :-------------------------------------------------------: |
     |    int    |  æ•´æ•°ç±»å‹  |                          age int                          |
     |  double   |  å°æ•°ç±»å‹  | å°æ•°ä¸€å…±æœ‰5ä½ï¼Œå°æ•°ç‚¹åä¿ç•™ä¸¤ä½<br/>    sorce double(5,2) |
     |   date    |  æ—¥æœŸç±»å‹  |                åŒ…å«**å¹´æœˆæ—¥ï¼šyyyy-MM-dd**                 |
     | datetime  |  æ—¥æœŸç±»å‹  |         åŒ…å«**å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼šyyyy-MM-dd HH:mm:ss**         |
     | timestamp | æ—¶é—´æˆ³ç±»å‹ |         åŒ…å«**å¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼šyyyy-MM-dd HH:mm:ss**         |
     |  varchar  | å­—ç¬¦ä¸²ç±»å‹ |       è¡¨ç¤ºå§“åæœ€å¤§20ä¸ªå­—ç¬¦<br/>    name varchar(20)       |

2. R-----Retrieveï¼šæŸ¥è¯¢ï¼›

   - æŸ¥è¯¢æŸä¸ªæ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨ï¼š

     ```sql
     show tables;
     ```
     
   - æŸ¥è¯¢è¡¨ç»“æ„ï¼š

     ```sql
     desc è¡¨å;
     ```
     
   - æŸ¥è¯¢å»ºè¡¨è¯­å¥ï¼š

     ```sql
     show create table è¡¨å;
     ```

3. U-----Updateï¼šä¿®æ”¹ï¼›

   - ä¿®æ”¹è¡¨åç§°ï¼š

     ```sql
     alter table è¡¨å1 rename to è¡¨å2;
     ```

   - ä¿®æ”¹è¡¨çš„å­—ç¬¦é›†ï¼š

     ```sql
     alter table è¡¨å character set å­—ç¬¦é›†åç§°;
     ```

   - æ·»åŠ ä¸€åˆ—ï¼š

     ```sql
     alter table è¡¨å add åˆ—å æ•°æ®ç±»å‹;
     ```

   - ä¿®æ”¹åˆ—çš„åç§°æˆ–è€…ç±»å‹ï¼š

     ```sql
     //æ—¢æ”¹ç±»å‹ï¼Œåˆæ”¹åç§°ï¼š
     alter table è¡¨å change åŸåˆ—å æ–°åˆ—å æ–°æ•°æ®ç±»å‹;
     //åªä¿®æ”¹ç±»å‹ï¼š
     alter table è¡¨å modify åˆ—å æ–°æ•°æ®ç±»å‹;
     ```
   
4. D-----Deleteï¼šåˆ é™¤ï¼›

   - åˆ é™¤è¡¨ï¼š

     ```sql
     drop table è¡¨å;
     drop table if exists è¡¨å;
     ```
     
   - åˆ é™¤åˆ—ï¼š
   
     ```sql
     alter table è¡¨å drop åˆ—å;
     ```
   
     

## 4ã€<span style="color:brown">DMLï¼š</span>å¢ã€åˆ ã€æ”¹è¡¨ä¸­æ•°æ®

1. æ·»åŠ æ•°æ®ï¼š

   - è¯­æ³•ï¼š

     ```sql
     //æ ‡å‡†ç‰ˆ
     insert into è¡¨å(åˆ—å1,åˆ—å2,åˆ—å3...) values(å€¼1,å€¼2,å€¼3...);
     //ç®€åŒ–ç‰ˆ
     insert into è¡¨å values(å€¼1,å€¼2,å€¼3...);
     ```

   - <span style="color:red">æ³¨æ„ï¼š</span>

     ```apl
     1ã€åˆ—åå’Œå€¼ä¸€ä¸€å¯¹åº”;
     2ã€å¦‚æœè¡¨ååé¢ï¼Œä¸å®šä¹‰åˆ—åï¼Œåˆ™é»˜è®¤ç»™'æ‰€æœ‰åˆ—æ·»åŠ å€¼';
     3ã€é™¤äº†æ•°å­—ç±»å‹ï¼Œå…¶ä»–ç±»å‹éœ€è¦ä½¿ç”¨å¼•å·(å•åŒéƒ½å¯);
     ```

2. åˆ é™¤æ•°æ®ï¼š

   - è¯­æ³•ï¼š

     ```sql
     //1ã€æ™®é€šåˆ é™¤è¡¨ä¸­æ•°æ®
     delete from è¡¨å where æ¡ä»¶ï¼›
     
     //2ã€åˆ é™¤è¡¨, å¹¶åŒæ—¶åˆ›å»ºäºè¯¥ä¸€æ¨¡ä¸€æ ·çš„è¡¨ç»“æ„
     truncate table è¡¨å;
     ```
   
3. ä¿®æ”¹æ•°æ®ï¼š

   - è¯­æ³•ï¼š
   
     ```sql
     //1ã€æ™®é€šæ›´æ–°è¡¨ä¸­æ•°æ®
     update è¡¨å set åˆ—å1 = å€¼1,åˆ—å2 = å€¼2,åˆ—å3 = å€¼3... where æ¡ä»¶;
     //2ã€æš´åŠ›æ›´æ–°è¡¨ä¸­æ•°æ®(ä¸å»ºè®®ä½¿ç”¨)
     # ä¸æ·»åŠ ä»»ä½•æ¡ä»¶, åˆ™å°†è¡¨ä¸­æ•°æ®å…¨éƒ¨æ›´æ–°
     update è¡¨å set åˆ—å1 = å€¼1,åˆ—å2 = å€¼2,åˆ—å3 = å€¼3...;
     ```



## 5ã€<span style="color:brown">DQLï¼š</span>æŸ¥è¯¢è¡¨ä¸­æ•°æ®ï¼ˆåŸºç¡€ç¯‡ï¼‰

**5.1ã€è¯­æ³•æ€»ä½“ä»‹ç»ï¼š**

```sql
select
    å­—æ®µåˆ—è¡¨
from
    è¡¨ååˆ—è¡¨
where
    åˆ†ç»„ä¹‹å‰çš„æ¡ä»¶é™å®š
group by
    åˆ†ç»„å­—æ®µ
having
    åˆ†ç»„ä¹‹åçš„æ¡ä»¶é™å®š
order by
    æ’åº
limit 
    åˆ†é¡µé™å®š
```

**5.2ã€æŸ¥è¯¢æ“ä½œï¼š**

1. åŸºç¡€æŸ¥è¯¢

   > select * from student;
   > select name,age from student;

   ```sql
   //æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰æ•°æ®
   select * from è¡¨ååˆ—è¡¨;
   //æŸ¥è¯¢è¡¨ä¸­æŒ‡å®šçš„å­—æ®µæ•°æ®
   select å­—æ®µåˆ—è¡¨ from è¡¨ååˆ—è¡¨;
   ```

2. **å»é™¤é‡å¤**çš„æŸ¥è¯¢

   ```sql
   select distinct å­—æ®µåˆ—è¡¨ from è¡¨ååˆ—è¡¨;
   ```

3. **è®¡ç®—åˆ—ä¸åˆ—é—´æ•°å€¼**çš„æŸ¥è¯¢

   > `select name,math,english,math+IFNULL(english,0) from student;`

   ```sql
   # è‹¥æƒ³ä½¿ç”¨å…¶ä»–è¿ç®—æ¨¡å¼, åªéœ€è¦æ›´æ¢å­—æ®µæ•°å€¼å…³è”ç¬¦å·å³å¯
   # å¦‚æœæŸä¸ªå­—æ®µçš„å€¼ä¸ºnull, é‚£ä¹ˆè¿ç®—ç»“æœä¹Ÿä¼šæ˜¯null
   select å­—æ®µ1,å­—æ®µ2,...,å­—æ®µ1+å­—æ®µ2+... from è¡¨ååˆ—è¡¨;
   
   è§£å†³å…³äºnullå€¼çš„é—®é¢˜:
   åŸºç¡€è¯­æ³•ç»“æ„ä¸å˜, åœ¨'å¯èƒ½å‡ºç°nullå€¼çš„å­—æ®µ'å¤„ä¿®æ”¹:
       IFNULL(å­—æ®µ,0)
   ```

4. å­—æ®µã€è¡¨çš„åˆ«åï¼š

   > select name as å§“å, age å¹´é¾„, address as åœ°å€ from user;

   ```sql
   //as æ˜¯ä¸ºå­—æ®µè¿›è¡Œæ–°åç§°ä¸ç›¸åº”å­—æ®µçš„è¿æ¥ç¬¦å·['å¯ä»¥çœç•¥']
   select å­—æ®µ1 as åç§°1,å­—æ®µ2 åç§°2,... from è¡¨ååˆ—è¡¨; 
   ```


**5.2ã€æ¡ä»¶æŸ¥è¯¢ï¼š**

1. åœ¨åŸºç¡€æŸ¥è¯¢åï¼ŒåŠ ä¸Šï¼šwhere  æ¡ä»¶

2. è¿ç®—ç¬¦ï¼š

   ```scss
   * >ã€<ã€>=ã€<=ã€=ã€<> (ä¸ç­‰äº)
   * between...and...     			åœ¨æ¡ä»¶1å’Œæ¡ä»¶2ä¹‹é—´
   * in                   			åœ¨æŸä¸€ä¸ªæ•°å€¼é›†åˆä¸­
   ---------------------------------------------------------------------------------------------------------
   * like				   	        æ¨¡ç³ŠæŸ¥è¯¢
       								å ä½ç¬¦: 
              				 				_  å•ä¸ªä»»æ„å­—ç¬¦
               							%  å¤šä¸ªä»»æ„å­—ç¬¦
   ---------------------------------------------------------------------------------------------------------
   * is (not) NULL					åˆ¤å®šæ˜¯å¦ä¸ºNULLå€¼
   * and æˆ–è€… &&			  		   å…³ç³»ä¸
   * or æˆ–è€… ||                     å…³ç³»æˆ–
   * not æˆ–è€… !			           å…³ç³»é
   ```

3. ä½¿ç”¨ï¼š

   åŸºç¡€è¿ç®—ç¬¦

   ```sql
   //å¤§äº20å²
   select * from student where age > 20;
   //å¤§äºç­‰äº20å²
   select * from student where age >= 20;
   //å°äº20å²
   select * from student where age < 20;
   //å°äºç­‰äº20å²
   select * from student where age <= 20;
   //ç­‰äº20å²
   select * from student where age = 20;
   //ä¸ç­‰äº20å²
   select * from student where age <> 20;
   ```

   between ... and  ...ã€å…³ç³»ç¬¦ã€is  (not)  NULLã€in

   ```sql
   //å¤§äº20 ä¸” å°äº30
   select * from student where age > 20 and age <30;
   //åœ¨20åˆ°30ä¹‹é—´æŸ¥è¯¢(åŒ…å«20å’Œ30)
   select * from student where age between 20 and 30;
   ```

   ```sql
   //æŸ¥è¯¢å¹´é¾„22å²ï¼Œ19å²ï¼Œ25å²çš„äººå‘˜ä¿¡æ¯
   select * from student where age=22 or age=19 or age=25;
   select * from student where age in(22,19,25);
   ```

   ```sql
   //æŸ¥è¯¢è‹±è¯­æˆç»©ä¸ºNULL
   select * from student where english is NULL;
   //æŸ¥è¯¢è‹±è¯­æˆç»©ä¸æ˜¯NULL
   select * from student where english is not NULL;
   ```

   æ¨¡ç³ŠæŸ¥è¯¢

   ```sql
   //æŸ¥æ‰¾å¼ ä¸‰çš„ä¿¡æ¯
   select * from student where name like'å¼ _';
   //æŸ¥æ‰¾Tomçš„ä¿¡æ¯
   select * from student where name like'%m';
   //æŸ¥è¯¢åå­—æ˜¯ä¸‰ä¸ªå­—çš„äºº
   select * from student where name like'___';
   //æŸ¥è¯¢åå­—ä¸­åŒ…å«é©¬çš„äºº
   select * from student where name like'%é©¬%';
   ```



## 6ã€<span style="color:brown">DQLï¼š</span>æŸ¥è¯¢è¡¨ä¸­æ•°æ®ï¼ˆè¿›é˜¶ç¯‡ï¼‰

**6.1ã€æ’åºæŸ¥è¯¢ï¼š**

1. è¯­æ³•ï¼š

   <span style="color:orange">å½“æœ‰å¤šä¸ªæ’åºå­—æ®µæ—¶ï¼Œæ’åºæ‰§è¡Œé¡ºåºé¦–å…ˆæ ¹æ®ç¬¬ä¸€ä¸ªæ’åºå­—æ®µï¼ï¼è‹¥ç¬¬ä¸€æ’åºå­—æ®µä¸æ»¡è¶³ï¼Œåˆ™å†æ‰§è¡Œç¬¬äºŒæ’åºå­—æ®µã€‚</span>

   ```sql
   order by æ’åºå­—æ®µ1,æ’åºå­—æ®µ2,æ’åºå­—æ®µ3,...
   ```

2. æ’åºç»“æœçš„åˆ†ç±»ï¼š
   - é»˜è®¤ä¸ºï¼šASCï¼›
   - å‡åºï¼šASCï¼›
   - é™åºï¼šDESCï¼›

3. ä½¿ç”¨ï¼š

   ```sql
   //æŒ‰ç…§mathçš„æ•°å€¼, ä»¥é™åºçš„é¡ºåºæ’åˆ—
   select * from student order by math DESC;
   //æŒ‰ç…§mathçš„æ•°å€¼, å¦‚æœæ•°å­¦æˆç»©ä¸€æ ·, åˆ™æŒ‰ç…§Englishæ•°å€¼æ’åº
   select * from student order by math ASC,english ASC;
   ```

**6.2ã€èšåˆå‡½æ•°ï¼š**

1. ä½œç”¨ï¼š

   - <span style="color:orange">å°†åˆ—æ•°æ®ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œç”¨äºè®¡ç®—**çºµå‘åˆ—**çš„æ•°å€¼</span>ï¼›

   - èšåˆå‡½æ•°éœ€è¦æ³¨æ„NULLå€¼ï¼š

     1ã€é€‰æ‹©ä¸åŒ…å«NULLçš„å­—æ®µï¼›

     2ã€ä½¿ç”¨  IFNULL(å«æœ‰NULLçš„å­—æ®µï¼Œ0) ï¼›

2. ç±»åˆ«ï¼š

   ```sql
   count(...)				è®¡ç®—ä¸ªæ•°  
   max(...)				è®¡ç®—æœ€å¤§å€¼
   min(...)				è®¡ç®—æœ€å°å€¼
   sum(...)				è®¡ç®—æ€»å’Œ
   avg(...)				è®¡ç®—å¹³å‡å€¼
   ```

3. ä½¿ç”¨ï¼š

   count(å­—æ®µåç§°)

   ```sql
   //æ²¡æœ‰NULLå€¼
   select count(name) from student;
   select count(*) from student;
   //æœ‰NULLå€¼
   select count(IFNULL(english,0)) from student;
   ```

   max(å­—æ®µåç§°)ã€min(å­—æ®µåç§°)

   ```sql
   //æ²¡æœ‰NULLå€¼
   select max(age) from student;
   select min(math) from student;
   //æœ‰NULLå€¼
   select max(IFNULL(english,0)) from student;
   select min(IFNULL(english,0)) from student;
   ```

   sum(å­—æ®µåç§°)

   ```sql
   //æ²¡æœ‰NULLå€¼
   select sum(math) from student;
   //æœ‰NULLå€¼
   select sum(IFNULL(english,0)) from student;
   ```

   avg(å­—æ®µåç§°)

   ```sql
   //æ²¡æœ‰NULLå€¼
   select avg(math) from student;
   //æœ‰NULLå€¼
   select avg(IFNULL(english,0)) from student;
   ```

**6.3ã€åˆ†ç»„æŸ¥è¯¢ä¸åç½®æ¡ä»¶ï¼š**

1. è¯­æ³•ï¼š

   ```sql
   group by åˆ†ç»„å­—æ®µ
   having åˆ†ç»„ä¹‹åçš„æ¡ä»¶é™å®š
   ```

2. ä½¿ç”¨ï¼š

   ```sql
   //æŒ‰ç…§æ€§åˆ«åˆ†ç»„, åˆ†åˆ«æŸ¥è¯¢ç”·ã€å¥³åŒå­¦çš„æ•°å­¦å¹³å‡åˆ†
   select sex,avg(math) as å¹³å‡åˆ† from student group by sex;
   //æŒ‰ç…§æ€§åˆ«åˆ†ç»„, åˆ†åˆ«æŸ¥è¯¢ç”·ã€å¥³åŒå­¦çš„æ•°å­¦å¹³å‡åˆ†ã€äººæ•°
   select sex,avg(math) as å¹³å‡åˆ†,count(id) as äººæ•° from student group by sex;
   //æŒ‰ç…§æ€§åˆ«åˆ†ç»„, åˆ†åˆ«æŸ¥è¯¢ç”·ã€å¥³åŒå­¦çš„å¹³å‡åˆ†ã€äººæ•°, å¦‚æœmathåˆ†æ•°ä½äº70åˆ†, ä¸å‚ä¸åˆ†ç»„
   select sex,avg(math) as å¹³å‡åˆ†,count(id) as äººæ•° from student where math>=70 group by sex;
   ```
   
   ```sql
   //æŒ‰ç…§æ€§åˆ«åˆ†ç»„, åˆ†åˆ«æŸ¥è¯¢ç”·ã€å¥³åŒå­¦çš„å¹³å‡åˆ†ã€äººæ•°
   //å¦‚æœåˆ†æ•°ä½äºmathåˆ†æ•°ä½äº70åˆ†, ä¸å‚ä¸åˆ†ç»„
   //åˆ†ç»„ä¹‹å, äººæ•°è¦å¤§äº2
   select sex,avg(math) as å¹³å‡åˆ†,count(id) as äººæ•° from student 
      where math>=70 group by sex having count(id)>2;
   ```
   
3. <span style="color:red">**æ³¨æ„ï¼š**</span>

   ```scss
   1ã€åˆ†ç»„åæŸ¥è¯¢çš„å­—æ®µ: åˆ†ç»„å­—æ®µã€èšåˆå‡½æ•°;
   2ã€where å’Œ having çš„åŒºåˆ«ï¼Ÿ
   	* where åœ¨åˆ†ç»„ä¹‹å‰é™å®š, å¦‚æœä¸æ»¡è¶³æ¡ä»¶, åˆ™ä¸å‚ä¸åˆ†ç»„;
   	* having åœ¨åˆ†ç»„åè¿›è¡Œé™å®š, å¦‚æœä¸æ»¡è¶³ç»“æœ, åˆ™ä¸ä¼šè¢«æŸ¥è¯¢å‡ºæ¥;
   	* where åé¢ä¸èƒ½è·Ÿèšåˆå‡½æ•°, åä¹‹ having åˆ™å¯ä»¥;
   ```

**6.4ã€åˆ†é¡µæŸ¥è¯¢ï¼š**

1. è¯­æ³•ï¼š

   ```sql
   limit å¼€å§‹çš„ç´¢å¼•,æ¯é¡µæŸ¥è¯¢çš„æ¡æ•°;
   ```

2. ä½¿ç”¨ï¼š

   <!--[å¼€å§‹çš„ç´¢å¼•]ä¸åŒ…å«åœ¨æŸ¥è¯¢ç»“æœä¸­-->

   ```sql
   //æ¯é¡µæ˜¾ç¤ºä¸‰æ¡è®°å½•
   select * from student limit 0,3;   --ç¬¬1é¡µ: 1ã€2ã€3
   select * from student limit 3,3;   --ç¬¬2é¡µ: 4ã€5ã€6        
   ```

3. <span style="color:orange">**åˆ†é¡µå…¬å¼ï¼š**</span>

   $$
   å¼€å§‹çš„ç´¢å¼• = ï¼ˆå½“å‰çš„é¡µç  - 1ï¼‰* æ¯é¡µæŸ¥è¯¢çš„æ¡æ•°
   $$
   

## 7ã€<span style="color:brown">DCLï¼š</span>ç®¡ç†ç”¨æˆ·ã€æˆæƒ

**7.1ã€ç®¡ç†ç”¨æˆ·ï¼š**

```sql
# æ·»åŠ ç”¨æˆ·
create user 'ç”¨æˆ·å'@'ä¸»æœºå' identified by 'å¯†ç ';
------------------------------------------------------------------------------------------------------------
# åˆ é™¤ç”¨æˆ·
drop user 'ç”¨æˆ·å'@'ä¸»æœºå';
------------------------------------------------------------------------------------------------------------
# æŸ¥è¯¢æ•°æ®åº“, æŸ¥è¯¢çš„ç»“æœä¸€èˆ¬ä¼šæœ‰: æœ¬åœ°ç™»å½•è´¦æˆ·ã€è¿œç¨‹ç™»å½•è´¦æˆ·
//åˆ‡æ¢åˆ°mysqlæ•°æ®åº“
use mysql;
//æŸ¥è¯¢userè¡¨
select * from user;
```

**7.2ã€ä¿®æ”¹ç”¨æˆ·å¯†ç :**

> MySQLä¸­å¿˜è®°äº†å¯†ç ï¼Ÿ
>
> 1. cmd ï¼ˆä»¥ç®¡ç†å‘˜æ‰§è¡Œï¼‰  -->  net   stop   mysql  ã€åœæ­¢MySQLæœåŠ¡ã€‘ï¼›
> 2. ä½¿ç”¨æ— éªŒè¯æ–¹å¼å¯åŠ¨MySQLæœåŠ¡ï¼š`mysql --skip-grant-tables`ï¼›
> 3. é‡æ–°æ‰“å¼€cmdçª—å£ï¼Œè¾“å…¥ï¼šmysqlï¼›
> 4. ä½¿ç”¨mysqlæ•°æ®åº“ï¼šuse  mysqlï¼›
> 5. ä¿®æ”¹å¯†ç ï¼šalter user 'ç”¨æˆ·å'@'ä¸»æœºå' identified by 'æ–°å¯†ç 'ï¼Œä¹‹ååœ¨ä»»åŠ¡ç®¡ç†å™¨å…³é—­mysqlæœåŠ¡ï¼›
> 6. é‡æ–°æ‰“å¼€cmdçª—å£ã€ç®¡ç†å‘˜èº«ä»½ã€‘ï¼Œè¾“å…¥ï¼šnet   start  mysqlï¼›
> 7. è¾“å…¥æ–°çš„å¯†ç è¿›è¡Œç™»å½•ï¼›

```sql
# è¯­æ³•
update user set password = password('æ–°å¯†ç ') where user = 'ç”¨æˆ·å';
set password for 'ç”¨æˆ·å'@'ä¸»æœºå' = password('æ–°å¯†ç ');
------------------------------------------------------------------------------------------------------------
# èŒƒä¾‹
UPDATE USER SET PASSWORD = PASSWORD('abc') WHERE USER = 'lisi';
SET PASSWORD FOR 'root'@'localhost' = PASSWORD('123'); 
```

**7.3ã€æˆæƒç®¡ç†ï¼š**

> SHOW GRANTS FOR 'lisi'@'%';

```sql
# æŸ¥è¯¢æƒé™
show grants for 'ç”¨æˆ·å'@'ä¸»æœºå';
```

---

> ç»™å¼ ä¸‰ç”¨æˆ·æˆäºˆæ‰€æœ‰æƒé™ï¼Œåœ¨ä»»æ„æ•°æ®åº“ä»»æ„è¡¨ä¸Š
> GRANT ALL ON *.* TO 'zhangsan'@'localhost';

```sql
# æˆäºˆæƒé™
grant æƒé™åˆ—è¡¨ on æ•°æ®åº“å.è¡¨å to 'ç”¨æˆ·å'@'ä¸»æœºå';
```

---

> REVOKE UPDATE ON db3.`account` FROM 'lisi'@'%';

```sql
# æ’¤é”€æƒé™
revoke æƒé™åˆ—è¡¨ on æ•°æ®åº“å.è¡¨å from 'ç”¨æˆ·å'@'ä¸»æœºå';
```



## 8ã€<span style="color:brown">çº¦æŸï¼š</span>

**8.1ã€æ¦‚å¿µï¼š**

```scss
å¯¹è¡¨ä¸­æ•°æ®è¿›è¡Œé™å®š, ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ã€æœ‰æ•ˆæ€§ã€å®Œæ•´æ€§ï¼ï¼ï¼
```

**8.2ã€åˆ†ç±»ï¼š**

```scss
ä¸»é”®çº¦æŸ: primary key
éç©ºçº¦æŸ: not null
å”¯ä¸€çº¦æŸ: unique
å¤–é”®çº¦æŸ: foreign key  (ä¸»è¦ç”¨äºå¤šè¡¨æ“ä½œ)
```

**8.3ã€éç©ºçº¦æŸï¼š**

<!--æŸä¸€åˆ—çš„å€¼ä¸èƒ½ä¸ºNULL-->

1. åˆ›å»ºè¡¨ï¼Œæ·»åŠ éç©ºçº¦æŸ

   ```sql
   create table stu(
   	id int,
   	name varchar(20) not null --nameçš„å€¼ä¸èƒ½ä¸ºNULL
   );
   ```

2. å®Œæˆåˆ›å»ºè¡¨åï¼Œæ·»åŠ éç©ºçº¦æŸ

   ```sql
   alter table stu modify name varchar(20) not null;
   ```
   
3. åˆ é™¤nameçš„éç©ºçº¦æŸ

   ```sql
   alter table stu modify name varchar(20);
   ```

**8.4ã€å”¯ä¸€çº¦æŸï¼š** 

<!--æŸä¸€åˆ—çš„å€¼ä¸èƒ½é‡å¤-->

1. åˆ›å»ºè¡¨ï¼Œæ·»åŠ å”¯ä¸€çº¦æŸ

   ````sql
   create table stu(
   	id int,
   	name varchar(20) not null,
   	number varchar(20) unique
   );
   ````

2. å®Œæˆåˆ›å»ºè¡¨åï¼Œæ·»åŠ å”¯ä¸€çº¦æŸ

   ```sql
   alter table stu modify number varchar(20) unique;
   ```

3. åˆ é™¤numberçš„å”¯ä¸€çº¦æŸï¼ˆ<span style="color:red">ä¸éç©ºçº¦æŸæœ‰å·®åˆ«</span>ï¼‰

   ```sql
   alter table stu drop index number;
   ```

**8.5ã€ä¸»é”®çº¦æŸï¼š**

<!--éç©ºä¸”å”¯ä¸€, ä¸»é”®å°±æ˜¯è¡¨ä¸­çš„å”¯ä¸€æ ‡è¯†-->

1. åˆ›å»ºè¡¨ï¼Œæ·»åŠ ä¸»é”®çº¦æŸ

   ```sql
   create table stu(
   	id int primary key,  --idçš„å€¼æ˜¯éç©ºä¸”å”¯ä¸€çš„
   	name varchar(20) not null,
   	phone_num varchar(20) unique
   );
   ```

2. å®Œæˆåˆ›å»ºè¡¨åï¼Œæ·»åŠ ä¸»é”®çº¦æŸ

   ```sql
   alter table stu modify id int primary key;
   ```

3. åˆ é™¤ä¸»é”®çº¦æŸï¼ˆ<span style="color:red">ä¸éç©ºçº¦æŸæœ‰å·®åˆ«</span>ï¼‰

   ```sql
   alter table stu drop primary key;
   ```

4. <span style="color:green">**è‡ªåŠ¨å¢é•¿ï¼š**</span>
   <!--å¦‚æœæŸä¸€åˆ—æ˜¯æ•°å€¼ç±»å‹çš„, ä½¿ç”¨auto_increment å¯ä»¥æ¥å®Œæˆå€¼å¾—è‡ªåŠ¨å¢é•¿ï¼ï¼ï¼-->

- åˆ›å»ºè¡¨ï¼Œå®ç°æ•°å€¼çš„è‡ªåŠ¨å¢é•¿ï¼š

  ```sql
  create table stu(
  	id int primary key auto_increment,
  	name varchar(20) not null,
  	phone_num varchar(20) unique
  );
  ```

- å®Œæˆè¡¨åï¼Œæ·»åŠ è‡ªåŠ¨å¢é•¿

  ```sql
  alter table stu modify id int atuo_increment;
  ```
  
- åˆ é™¤è‡ªåŠ¨å¢é•¿ï¼šï¼ˆ<span style="color:red">ç”±äºæ™®é€šçš„è°ƒèŠ‚è¯­å¥æ— æ³•åˆ é™¤ä¸»é”®çº¦æŸï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥åˆ é™¤è‡ªåŠ¨å¢é•¿</span>ï¼‰

  ```sql
  alter table stu modify id int;
  ```

**8.6ã€å¤–é”®çº¦æŸï¼š**

<!--è®©è¡¨ä¸è¡¨äº§ç”Ÿå…³ç³», ä»è€Œä¿è¯æ•°æ®çš„æ­£ç¡®æ€§-->

1. åˆ›å»ºè¡¨ï¼Œæ·»åŠ å¤–é”®çº¦æŸ

   ```sql
   create table è¡¨å(
   	....
   	å¤–é”®åˆ—,
   	constraint å¤–é”®åç§° foreign key(å¤–é”®åˆ—åç§°) references ä¸»è¡¨åç§°(ä¸»é”®åˆ—åç§°)
   );
   ```
   
   å®ç°ï¼šæ­¤æ—¶ä¸¤è¡¨äº§ç”Ÿå…³è”ï¼Œä¸èƒ½å¤Ÿç›´æ¥åˆ é™¤ä»»ä½•ä¸€ä¸ªè¡¨æ ¼

   ```sql
   create table department(
   	--ä¸»é”®åˆ—
   	id int primary key auto_increment,
   	dep_name varchar(20),
   	dep_location varchar(20)
   );
   
   create table employee(
   	id int primary key auto_increment,
   	name varchar(20) not null,
   	age int,
   	
   	--å¤–é”®å¯¹äºä¸»è¡¨çš„ä¸»é”®
   	dep_id int,  
   	constraint emp_dep_fk foreign key(dep_id) references department(id)
   );
   ```
   
2. åˆ é™¤å¤–é”®çº¦æŸï¼šï¼ˆ<span style="color:red">ä¸éç©ºçº¦æŸæœ‰å·®åˆ«</span>ï¼‰

   ```sql
   alter table employee drop foreign key å¤–é”®åç§°;
   ```

3. å®Œæˆåˆ›å»ºè¡¨åï¼Œæ·»åŠ å¤–é”®çº¦æŸï¼š

   ```sql
   alter table employee add constraint å¤–é”®åç§° foreign key(å¤–é”®åˆ—) references ä¸»è¡¨åç§°(ä¸»è¡¨åˆ—);
   ```

4. <span style="color:violet">**çº§è”æ“ä½œï¼š**</span>

   è¯­æ³•1ï¼šçº§è”æ›´æ–°

   ```sql
   alter table employee add constraint å¤–é”®åç§° foreign key(å¤–é”®åˆ—åç§°) references ä¸»è¡¨åç§°(ä¸»è¡¨åˆ—åç§°) on update cascade;
   ```

   è¯­æ³•2ï¼šçº§è”åˆ é™¤

   ```sql
   alter table employee add constraint å¤–é”®åç§° foreign key(å¤–é”®åˆ—åç§°) references ä¸»è¡¨åç§°(ä¸»è¡¨åˆ—åç§°) on delete cascade;
   ```

