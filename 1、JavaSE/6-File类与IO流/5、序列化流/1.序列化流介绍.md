## <!--åºåˆ—åŒ–ä¸ååºåˆ—åŒ–éƒ½æ˜¯é’ˆå¯¹äºå¯¹è±¡-->

## 1ã€<span style="color:brown">åŸºç¡€å†…å®¹ï¼š</span>

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96.png" style="zoom:80%;" />

**1.1ã€Javaåºåˆ—åŒ–æ–¹å¼ï¼š**ğŸ¦ºğŸ¦ºğŸ¦º

- å®ç°`Serializable`æ¥å£ï¼›
- å®ç°`Externalizable`æ¥å£ï¼›

**1.2ã€å¯¹è±¡çš„åºåˆ—åŒ–ï¼š**

1. æŠŠå¯¹è±¡ä»¥æµçš„å½¢å¼ï¼Œå†™å…¥åˆ°æ–‡ä»¶ä¸­ä¿å­˜ï¼›
2. ObjectOutputStreamï¼šå¯¹è±¡çš„åºåˆ—åŒ–æµ

**1.3ã€å¯¹è±¡çš„ååºåˆ—åŒ–ï¼š**

1. æŠŠæ–‡ä»¶ä¸­ä¿å­˜çš„å¯¹è±¡ï¼Œä»¥æµçš„æ–¹å¼è¯»å–å‡ºæ¥ï¼›
2. ObjectInputStreamï¼šå¯¹è±¡çš„ååºåˆ—åŒ–æµ



## 2ã€<span style="color:brown">transientå…³é”®å­—ï¼š</span>

**2.1ã€<u>staticä¸transient</u>çš„åŒºåˆ«ï¼š**

ç”±äº<u>é™æ€ä¼˜å…ˆäºéé™æ€</u>ï¼Œä¸”<u>*é™æ€ä¼˜å…ˆäºå¯¹è±¡è¿›å…¥å†…å­˜*</u>ï¼Œå› æ­¤<span style="color:green">**è¢«staticä¿®é¥°çš„æˆå‘˜å˜é‡å‡ä¸èƒ½åºåˆ—åŒ–**</span>ï¼›

**2.2ã€transientåº”ç”¨åœºæ™¯ï¼š**

ä¸€èˆ¬åªè¦è¿™ä¸ªç±»å®ç°äº†Serilizableæ¥å£ï¼Œè¿™ä¸ªç±»çš„**æ‰€æœ‰å±æ€§å’Œæ–¹æ³•**éƒ½ä¼šè‡ªåŠ¨åºåˆ—åŒ–ã€‚

ç„¶è€Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œ<u>è¿™ä¸ªç±»çš„æœ‰äº›å±æ€§éœ€è¦åºåˆ—åŒ–ï¼Œè€Œå…¶ä»–å±æ€§ä¸éœ€è¦è¢«åºåˆ—åŒ–</u>ï¼Œå¦‚ï¼šå¦‚æœä¸€ä¸ªç”¨æˆ·æœ‰ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼Œé“¶è¡Œå¡å·ç­‰ï¼‰ã€‚ä¸ºäº†å®‰å…¨èµ·è§ï¼Œä¸å¸Œæœ›åœ¨ç½‘ç»œæ“ä½œä¸­è¢«ä¼ è¾“ï¼Œ*<u>è¿™äº›ä¿¡æ¯å¯¹åº”çš„å˜é‡å°±å¯ä»¥åŠ ä¸Štransientå…³é”®å­—</u>*ã€‚

**2.3ã€æ€»ç»“ï¼š**

- ä¸€æ—¦å˜é‡è¢«transientä¿®é¥°ï¼Œ***å˜é‡å°†ä¸å†æ˜¯å¯¹è±¡æŒä¹…åŒ–çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥å˜é‡å†…å®¹åœ¨åºåˆ—åŒ–åæ— æ³•è·å¾—è®¿é—®***ï¼›

- transientå…³é”®å­—åªèƒ½ä¿®é¥°**è‡ªå®šä¹‰å˜é‡**ï¼Œè€Œ<u>ä¸èƒ½ä¿®é¥°æœ¬åœ°å˜é‡ã€æ–¹æ³•å’Œç±»</u>ï¼›
- <u>è¢«transientå…³é”®å­—ä¿®é¥°çš„å˜é‡ä¸å†èƒ½è¢«åºåˆ—åŒ–</u>ï¼Œ*ä¸€ä¸ªé™æ€å˜é‡ä¸ç®¡æ˜¯å¦è¢«transientä¿®é¥°ï¼Œå‡ä¸èƒ½è¢«åºåˆ—åŒ–*ï¼›



## 3ã€<span style="color:brown">Javaåºåˆ—åŒ–çš„å¼‚å¸¸ï¼š</span>

**3.1ã€æ¦‚è¿°ï¼š**

|           åç§°           |                             å†…å®¹                             |
| :----------------------: | :----------------------------------------------------------: |
| NotSerializableException | åœ¨æ‰§è¡Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„æ—¶å€™ï¼Œå¦‚æœæŠ›å‡º`NotSerializableExceptionã€æ²¡æœ‰åºåˆ—åŒ–å¼‚å¸¸ã€‘`ï¼Œåˆ™è¯´æ˜ï¼š<u>*å¯¹è±¡æ²¡æœ‰å®ç°`java.io.Serializable`æ¥å£*</u>ï¼ï¼ï¼ |
|  InvalidClassException   | åœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼Œå‘ç°ï¼š<u>åŸæœ¬ç±»çš„serialVersionUID</u> ä¸ <u>**å­—èŠ‚å½¢å¼ç±»çš„**ååºåˆ—åŒ–åçš„ç±»çš„serialVersionUID</u> ä¸åŒ |

**3.2ã€è§£å†³æ–¹æ¡ˆï¼š**

- NotSerializableExceptionå¼‚å¸¸ï¼š<u>å®ä½“ç±»éœ€è¦å®ç°Serializableæ¥å£</u>ï¼›

- InvalidClassExceptionå¼‚å¸¸ï¼šåœ¨å®ç°Serializableæ¥å£çš„ç±»ä¸­ï¼ŒSerializableæ¥å£æä¾›äº†ä¸€ä¸ªserialVersionUIDçš„å¸¸é‡ï¼›

  ```java
  private static final long serialVersionUID = æ•°å€¼;
  	è¯¥ç‰ˆæœ¬å·ä¸»è¦ç”¨äºéªŒè¯"åºåˆ—åŒ–çš„å¯¹è±¡ä¸å¯¹åº”ç±»"æ˜¯å¦åŒ¹é…;
  ```

**3.3ã€ç”ŸæˆserialVersionUIDï¼š**

- åœ¨Settingsä¸­ï¼Œæœç´¢serializableï¼Œæ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼š`serializable class without 'seriaVersionUID'`ï¼›
- åœ¨å¯¹åº”ç±»ï¼Œ<u>é€‰ä¸­ç±»åæŒ‰ alt+enter å¿«æ·é”®</u>ï¼Œé€‰æ‹©ï¼š`Create constrant field'serializableUID' in xxx`ï¼›

<img src="https://raw.githubusercontent.com/root-bine/image/main/Typora-image/serialVersionUID.png" alt="image-20221120184238464" style="zoom: 80%;" />

**3.4ã€æ¼”ç¤ºï¼š**

```java
public class TransientTest {
    public static void main(String[] args) {
        User user = new User();
        user.setUsername("Alexia");
        user.setPasswd("123456");
        System.out.println("read before Serializable: ");	//read before Serializable: 
        System.out.println("username: " + user.getUsername());	//username: Alexia
        System.err.println("password: " + user.getPasswd());	//password: 123456
        try {
            ObjectOutputStream os = new ObjectOutputStream(
                    new FileOutputStream("E:\\user.txt"));
            os.writeObject(user); // å°†Userå¯¹è±¡å†™è¿›æ–‡ä»¶
            os.flush();
            os.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            ObjectInputStream is = new ObjectInputStream(new FileInputStream(
                    "E:\\user.txt"));
            user = (User) is.readObject(); // ä»æµä¸­è¯»å–Userçš„æ•°æ®
            is.close();
            System.out.println("read after Serializable: ");	//read after Serializable: 
            System.out.println("username: " + user.getUsername());	//username: Alexia
            System.err.println("password: " + user.getPasswd());	//password: null  
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
 
class User implements Serializable {
    private static final long serialVersionUID = 8294180014912103005L;  
    private String username;
    private transient String passwd;//æ­¤å¤„é™å®špasswordä¸ä¼šè¢«åºåˆ—åŒ–å’Œååºåˆ—åŒ–
 	// Getter and Setter
}
```

