## 1ã€<span style="color:brown">åå°„æœºåˆ¶ï¼š</span>

**1.1ã€ä»€ä¹ˆæ˜¯Javaåå°„æœºåˆ¶ï¼Ÿ**ğŸ›ºğŸ›ºğŸ›º

- ç¨‹åºè¿è¡Œæ—¶ï¼Œå¯ä»¥é€šè¿‡åå°„è·å¾—ä»»æ„ä¸€ä¸ªç±»çš„Classå¯¹è±¡ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå¯¹è±¡æŸ¥çœ‹è¿™ä¸ªç±»çš„ä¿¡æ¯ï¼›
- ç¨‹åºè¿è¡Œæ—¶ï¼Œå¯ä»¥é€šè¿‡åå°„åˆ›å»ºä»»æ„ä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œå¹¶è®¿é—®è¯¥å®ä¾‹çš„æˆå‘˜ï¼›
- ç¨‹åºè¿è¡Œæ—¶ï¼Œå¯ä»¥é€šè¿‡åå°„æœºåˆ¶ç”Ÿæˆä¸€ä¸ªç±»çš„åŠ¨æ€ä»£ç†ç±»æˆ–åŠ¨æ€ä»£ç†å¯¹è±¡ï¼›

**1.2ã€åå°„çš„æ¦‚å¿µï¼š**

â€‹	å°†ç±»çš„å„ä¸ªç»„æˆéƒ¨åˆ†å°è£…æˆå…¶ä»–å¯¹è±¡

**1.3ã€è®¡ç®—æœºä¸­Javaä»£ç è¿è¡Œé˜¶æ®µï¼š**

- <u>Sourceæºä»£ç é˜¶æ®µ</u>ï¼šJavaä»£ç ç»è¿‡ç¼–è¯‘å™¨ï¼Œäº§ç”Ÿäº† `.classå­—èŠ‚ç `æ–‡ä»¶ï¼›

- <u>Classç±»å¯¹è±¡é˜¶æ®µ</u>ï¼šå°†ç¼–è¯‘å¥½çš„.classå­—èŠ‚ç æ–‡ä»¶é€šè¿‡**ç±»åŠ è½½å™¨**ï¼ŒåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åäº§ç”Ÿ***ç±»å¯¹è±¡***ï¼›

- <u>Runtimeè¿è¡Œæ—¶é˜¶æ®µ</u>ï¼šé€šè¿‡ä¸Šè¿°äº§ç”Ÿçš„ç±»å¯¹è±¡ï¼Œç„¶ååˆ›å»ºå¯¹è±¡ï¼›



## 2ã€<span style="color:brown">è·å–å­—èŠ‚ç Class<E>å¯¹è±¡:</span>

### <span style="color:violet">**åŒä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶åœ¨ä¸€æ¬¡çš„ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œåªä¼šè¢«åŠ è½½ä¸€æ¬¡ï¼Œä¸è®ºé‡‡ç”¨å“ªç§æ–¹æ³•è·å–Classå¯¹è±¡ï¼Œç»“æœè·å–çš„éƒ½æ˜¯åŒä¸€å¯¹è±¡ï¼ï¼**</span>

**2.1ã€Javaä»£ç åªæœ‰å­—èŠ‚ç æ–‡ä»¶ï¼Œæœªè¿›å…¥å†…å­˜ï¼š**`å¤šç”¨äºé…ç½®æ–‡ä»¶`

```java
//å…¨ç±»åï¼šåŒ…å.ç±»å
//å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œè¿”å›Classå¯¹è±¡ã€‚
Class.forName("å…¨ç±»å");
```

**2.2ã€Javaä»£ç çš„å­—èŠ‚ç æ–‡ä»¶è¿›å…¥å†…å­˜ï¼Œä½†æ²¡æœ‰ç±»å¯¹è±¡ï¼š**`å¤šç”¨äºå‚æ•°çš„ä¼ é€’`

```java
ç±»å.class;
```

**2.3ã€å½“Javaä»£ç å·²ç»åœ¨è®¡ç®—æœºä¸­äº§ç”Ÿç±»å¯¹è±¡æ—¶ï¼š**`å¤šç”¨äºå¯¹è±¡è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡`

```java
å¯¹è±¡.getClass();
```



## 3ã€<span style="color:brown">Class<E>å¯¹è±¡çš„åŠŸèƒ½ä¸æ“ä½œ</span>

###  **3.1ã€åŠŸèƒ½ï¼š**

**3.1.1ã€è·å–æˆå‘˜å˜é‡ï¼š**

```java
//è·å–æ‰€æœ‰publicæˆå‘˜å˜é‡
Field[]	  getFields();
//è·å–æŒ‡å®šåç§°çš„publicæˆå‘˜å˜é‡
Field	  getField(String name);

//è·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡ï¼Œä¸è€ƒè™‘ä¿®é¥°ç¬¦
Field[]	  getDeclaredFields();
//è·å–æŒ‡å®šåç§°çš„æˆå‘˜å˜é‡ï¼Œä¸è€ƒè™‘ä¿®é¥°ç¬¦
Field     getDeclaredField(String name);
```

**3.1.2ã€è·å–æ„é€ æ–¹æ³•ï¼š**

```java
//è·å–æ‰€æœ‰publicè®¿é—®æƒé™çš„æ„é€ å™¨
Constructor<?>[] getConstructors();
//è®¿é—®æŒ‡å®šçš„publicè®¿é—®æƒé™çš„æ„é€ å™¨
//parameterTypes:æ„é€ å™¨ä¸­å‚æ•°ç±»å‹çš„Classå¯¹è±¡
Constructor<T>   getConstructor(Class<?>... parameterTypes)

//è®¿é—®æ‰€æœ‰çš„æ„é€ å™¨ï¼Œä¸è€ƒè™‘è®¿é—®ä¿®é¥°ç¬¦                       
Constructor<?>[] getDeclaredConstructors() 
//è®¿é—®æŒ‡å®šçš„æ„é€ å™¨ï¼Œä¸éœ€è¦è€ƒè™‘ä¿®é¥°ç¬¦
Constructor<T>   getDeclaredConstructor(Class<?>... parameterTypes)  
```

**3.1.3ã€è·å–æˆå‘˜æ–¹æ³•ï¼š**

```java
//è·å–æ‰€æœ‰çš„publicè®¿é—®æƒé™çš„æˆå‘˜æ–¹æ³•
Method[] getMethods();
//è·å–æŒ‡å®šçš„publicè®¿é—®æƒé™çš„æˆå‘˜æ–¹æ³•
Method   getMethod(String name, Class<?>... parameterTypes);

//è·å–æ‰€æœ‰çš„æˆå‘˜æ–¹æ³•ï¼Œä¸è€ƒè™‘è®¿é—®æƒé™ä¿®é¥°ç¬¦
Method[] getDeclaredMethods();
//è·å–æŒ‡å®šçš„æˆå‘˜æ–¹æ³•ï¼Œä¸è€ƒè™‘è®¿é—®æƒé™ä¿®é¥°ç¬¦
Method   getDeclaredMethod(String name, Class<?>... parameterTypes);
```

**3.1.4ã€è·å–ç±»åï¼š**

```java
String getName();
```

### 3.2ã€æ“ä½œï¼š

**3.2.1ã€Fieldï¼šæˆå‘˜å˜é‡**

```java
//è®¾ç½®å€¼
void set(Object obj, Object value);

//è·å–å€¼
Object get(Object obj);
```

**3.2.2ã€æš´åŠ›åå°„ï¼š**

<span style="color:red">**æ³¨æ„**</span>ï¼š<span style="color:orange">åœ¨ä½¿ç”¨ä¸è€ƒè™‘ä¿®é¥°ç¬¦æƒé™æ—¶ï¼Œå¦‚æœè¦è®¿é—®ç§æœ‰æˆå‘˜å˜é‡ï¼Œå¿…é¡»è¦**å¿½ç•¥è®¿é—®æƒé™ä¿®é¥°ç¬¦çš„å®‰å…¨æ£€æŸ¥ï¼Œå³ï¼šä½¿ç”¨setAccessible( )æ–¹æ³•ï¼Œä¸”å®šä¹‰ä¸ºtrue**</span>ï¼ï¼

```java
//å¿½ç•¥è®¿é—®æƒé™ä¿®é¥°ç¬¦çš„å®‰å…¨æ£€æŸ¥
//åªè¦æ¶‰åŠç§æœ‰æƒé™çš„è®¿é—®ï¼Œå¦‚æœæƒ³è¦å®ç°ï¼Œå¿…é¡»æ‰§è¡Œæ­¤æ“ä½œ
setAccessible(true):æš´åŠ›åå°„
```

**3.2.3ã€Constructor:æ„é€ æ–¹æ³•ï¼š**

```java
//åˆ›å»ºå¯¹è±¡(æœ‰å‚æ•°æ„é€ å™¨)
T  newInstance(Object... initargs);
//åˆ›å»ºå¯¹è±¡(æ— å‚æ•°æ„é€ å™¨)
Class newInstance();
```

**3.2.4ã€Method:æ‰§è¡Œæ–¹æ³•**

```java
//æ‰§è¡Œæ–¹æ³•
//Object obj ---> è·å–æ–¹æ³•æ‰€åœ¨çš„ç±»ï¼Œä½¿ç”¨è¯¥ç±»åˆ›å»ºçš„å¯¹è±¡
//Object... args ---> å¦‚æœè·å–çš„æ–¹æ³•æœ‰å‚æ•°åˆ—è¡¨ï¼Œæ­¤å¤„éœ€è¦è¡¥å…¨
Object invoke(Object obj, Object... args);
//è·å–æ–¹æ³•åç§°
String getName();
```

### **3.3ã€ä»£ç ï¼š**

**3.3.1ã€æˆå‘˜å˜é‡ï¼š**

```java
public class ReflectDemo02 {
    public static void main(String[] args) throws Exception{
        //è·å–Personç±»çš„classå¯¹è±¡
        Class<Person> personClass = Person.class;
        //Field[]	  getFields();
        Field[] fields = personClass.getFields();
        for(Field i:fields){
            System.out.println(i);
        }
        //Field	  getField(String name);
        Field name = personClass.getField("userName");
        System.out.println(name);
        //è·å–userNameçš„å€¼
        Person p = new Person();
        Object result = name.get(p);
        System.out.println(result);
        //è®¾ç½®userNameçš„å€¼
        name.set(p,"java surprise!!");
        System.out.println(p);
        System.out.println("============");
        //Field[]	  getDeclaredFields();
        Field[] fields1 = personClass.getDeclaredFields();
        for(Field a:fields1){
            System.out.println(a);
        }
        //Field     getDeclaredField(String name);
        Field year = personClass.getDeclaredField("age");
        //å¿½ç•¥æƒé™è®¿é—®ä¿®é¥°ç¬¦çš„å®‰å…¨æ£€æŸ¥
        year.setAccessible(true);
        Object result1 = year.get(p);
        System.out.println(result1);
    }
}
```

**3.3.2ã€æ„é€ å™¨ï¼š**

```java
public class ReflectDemo03 {
    public static void main(String[] args) throws Exception{
        Class<Person> personClass = Person.class;
        //æœ‰å‚æ•°æ„é€ å™¨
        //Constructor<T>   getConstructor(Class<?>... parameterTypes)
        Constructor<Person> constructor1 = personClass.getConstructor(String.class, int.class);
        System.out.println(constructor1);
        //åˆ›å»ºå¯¹è±¡
        Person javaScript1 = constructor1.newInstance("JavaScript", 250);
        System.out.println(javaScript1);
       //ç©ºå‚æ•°æ„é€ å™¨è°ƒç”¨
        Person person = personClass.newInstance();
        System.out.println(person);
    }
}
```

**3.3.3ã€æ–¹æ³•è°ƒç”¨ï¼š**

```java
public class ReflectDemo04 {
    public static void main(String[] args) throws Exception{
        Class<Person> personClass = Person.class;
        //Method[] getMethods();
        Method[] methods = personClass.getMethods();
        for(Method i:methods){
            System.out.println(i);
        }
        System.out.println("=============");
        //Method   getMethod(String name, Class<?>... parameterTypes);
        Method eat = personClass.getMethod("eat", String.class);
        System.out.println(eat);
        Method drink = personClass.getMethod("drink");
        System.out.println(drink);
        Person person = new Person();
        //æ‰§è¡Œæ–¹æ³•
        drink.invoke(person);
        //å¦‚æœæ–¹æ³•æœ‰å‚æ•°åˆ—è¡¨ï¼Œåœ¨è°ƒç”¨invokeæ–¹æ³•æ—¶ï¼Œè¿˜éœ€è¦è¾“å…¥ç›¸å¯¹åº”å˜é‡æ•°å€¼
        eat.invoke(person,"java");
        System.out.println("=============");
        //Method[] getDeclaredMethods();
        Method[] declaredMethods = personClass.getDeclaredMethods();
        for (Method j:declaredMethods){
            System.out.println(j);
        }
        System.out.println("============");
        //Method   getDeclaredMethod(String name, Class<?>... parameterTypes);
        Method eat1 = personClass.getDeclaredMethod("talk");
        eat1.setAccessible(true);
        eat1.invoke(person);
        System.out.println(eat1);
        //è·å–æ–¹æ³•åç§°
        String name = eat1.getName();
        System.out.println(name);
        //è·å–ç±»å
        String name1 = personClass.getName();
        System.out.println(name1);
    }
}
```



## 4ã€<span style="color:brown">æµ‹è¯•æ¡ˆä¾‹ï¼š</span>

**4.1ã€æ–¹æ³•ï¼š**

```java
public ClassLoader getClassLoader()
    1.è·å–ç±»åŠ è½½å™¨;
	2.é‡‡ç”¨ç±»çš„classå¯¹è±¡è¿›è¡Œè°ƒç”¨;
```

```java
public InputStream getResourceAsStream(String name)
    1.è¯»å–æ–‡ä»¶ï¼Œè½¬æ¢æˆä¸ºInputStreamç±»å‹;
	2.String name: æ–‡ä»¶çš„åç§°
```

**4.2ã€æ¡ˆä¾‹ï¼š**

- éœ€æ±‚ï¼š

  å†™ä¸€ä¸ªâ€œæ¡†æ¶â€ï¼Œå¹¶åœ¨**ä¸æ”¹å˜ç±»çš„ä»»ä½•ä»£ç **æƒ…å†µä¸‹ï¼Œå¯ä»¥åˆ›å»ºä»»ä½•ç±»çš„å¯¹è±¡ï¼ŒåŒæ—¶æ‰§è¡Œå…¶ä¸­çš„ä»»ä¸€æ–¹æ³•ã€‚

- å®ç°ï¼š

  1ã€é…ç½®æ–‡ä»¶ï¼šxxx.propertiesï¼›

  2ã€åå°„ï¼›

- æ­¥éª¤ï¼š

  1ã€å°†éœ€è¦åˆ›å»ºçš„å¯¹è±¡çš„å…¨ç±»åå’Œéœ€è¦æ‰§è¡Œçš„æ–¹æ³•ï¼Œå®šä¹‰åœ¨é…ç½®æ–‡ä»¶é‡Œï¼›

  2ã€åœ¨ç¨‹åºä¸­åŠ è½½å’Œè¯»å–é…ç½®æ–‡ä»¶ï¼›

  3ã€ä½¿ç”¨åå°„æŠ€æœ¯åŠ è½½æ–‡ä»¶è¿›å…¥å†…å­˜ï¼›

  4ã€åˆ›å»ºå¯¹è±¡ï¼›

  5ã€æ‰§è¡Œæ–¹æ³•ï¼›

```java
public class ReflectTest {
    public static void main(String[] args) throws Exception{
        //1ã€åŠ è½½é…ç½®æ–‡ä»¶
        //1.1ã€åˆ›å»ºpropertieså¯¹è±¡
        Properties properties = new Properties();
        //1.2ã€åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¹¶è½¬æ¢æˆä¸€ä¸ªé›†åˆ
        //1.2.1ã€è·å–ç±»åŠ è½½å™¨
        ClassLoader classLoader = ReflectTest.class.getClassLoader();
        //1.2.2ã€è·å–èµ„æºæ–‡ä»¶è·¯å¾„
        InputStream i = classLoader.getResourceAsStream("pro.properties");
        properties.load(i);

        //2ã€è·å–é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„æ•°æ®
        String className = properties.getProperty("className");
        String methodName = properties.getProperty("methodName");

        //3ã€å°†è¯¥ç±»åŠ è½½è¿›å†…å­˜
        Class cls = Class.forName(className);
        //4ã€åˆ›å»ºå¯¹è±¡
        Object obj = cls.newInstance();
        //5ã€è·å–æ–¹æ³•å¯¹è±¡
        Method method = cls.getMethod(methodName,String.class);
        method.setAccessible(true);
        //6ã€æ‰§è¡Œæ–¹æ³•
        method.invoke(obj,"java");
    }
}
```

`pro.propertiesæ–‡ä»¶ï¼š`

```apl
className = Day01.domain.Person
methodName = eat
```

